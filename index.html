<!DOCTYPE html>
<html lang="en" xml:lang="en" data-bs-theme="dark">
  <head>
    <title>Can I Jailbreak</title>
    <!-- Meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/custom.css" rel="stylesheet" />
    <!-- Scripts -->
    <script src="ua-parser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var parser = new UAParser();
        var result = parser.getResult();
        var osName = result.os.name || "Unknown";
        var osVersion = result.os.version || "Unknown";
        var deviceModel = result.device.model || "Unknown";

        console.log("Detected OS Version:", osVersion);

        if (
          deviceModel === "Unknown" ||
          (deviceModel !== "iPhone" && deviceModel !== "iPad")
        ) {
          document.getElementById("jailbreak-info").innerHTML = `
                    <div class="mt-3">
                        <h5><strong>Sorry :(</strong></h5>
                        <p>Your device is not supported.</p>
                    </div>
                `;
        } else {
          let csvFile;
          if (osVersion.startsWith("18")) {
            csvFile = "chart/18.csv";
          } else if (osVersion.startsWith("17")) {
            csvFile = "chart/17.csv";
          } else if (osVersion.startsWith("16")) {
            csvFile = "chart/16.csv";
          } else if (osVersion.startsWith("15")) {
            csvFile = "chart/15.csv";
          } else if (osVersion.startsWith("14")) {
            csvFile = "chart/14.csv";
          } else if (osVersion.startsWith("13")) {
            csvFile = "chart/13.csv";
          } else if (osVersion.startsWith("12")) {
            csvFile = "chart/12.csv";
          } else {
            document.getElementById("jailbreak-info").innerHTML = `
                        <div class="mt-3">
                            <h5><strong>Sadly :'(</strong></h5>
                            <p>No jailbreak available for ${deviceModel} with ${osName} ${osVersion}.</p>
                        </div>
                    `;
            return;
          }
          checkJailbreak(osVersion, csvFile, deviceModel, osName);
        }
      });

      function checkJailbreak(osVersion, csvFile, deviceModel, osName) {
        // Show loading state
        document.getElementById("jailbreak-info").innerHTML = `
          <div class="mt-3">
            <div class="card loading">
              <div class="card-body" style="height: 200px;"></div>
            </div>
          </div>
        `;

        Papa.parse(csvFile, {
          download: true,
          header: true,
          complete: function (results) {
            var data = results.data;
            var jailbreakInfo = [];

            for (const element of data) {
              var row = element;
              var osColumn = `iOS ${osVersion}`;
              if (
                row[osColumn] &&
                row[osColumn] !== "No JB" &&
                row[osColumn] !== "N/A"
              ) {
                jailbreakInfo.push({
                  device: row.Device,
                  status: row[osColumn],
                });
              }
            }

            if (jailbreakInfo.length > 0) {
              var jailbreakHtml = `
                <section>
                  <div class="card">
                    <div class="card-body p-0">
                      <div class="table-container">
                        <table class="table">
                          <thead>
                            <tr>
                              <th>Device</th>
                              <th>Jailbreak Tools</th>
                            </tr>
                          </thead>
                          <tbody>
              `;
              jailbreakHtml += jailbreakInfo
                .map((info) => {
                  let tools = info.status
                    .split(",")
                    .map((tool) => {
                      let toolLink;
                      let tooltipText = "";
                      
                      if (tool.trim() === "Dopamine") {
                        tooltipText = "Semi-untethered jailbreak for iOS 15.0-15.4.1";
                        toolLink = `<div class="tooltip-wrapper" data-tooltip="${tooltipText}">
                          <a href="https://ellekit.space/dopamine/" target="_blank" class="btn btn-primary btn-sm">Dopamine</a>
                        </div>`;
                      } else if (tool.trim() === "checkra1n") {
                        tooltipText = "Semi-tethered jailbreak using checkm8 bootrom exploit";
                        toolLink = `<div class="tooltip-wrapper" data-tooltip="${tooltipText}">
                          <a href="https://checkra.in/" target="_blank" class="btn btn-primary btn-sm">checkra1n</a>
                        </div>`;
                      } else if (tool.trim() === "palera1n") {
                        tooltipText = "Semi-tethered jailbreak for iOS 15.0-16.5";
                        toolLink = `<div class="tooltip-wrapper" data-tooltip="${tooltipText}">
                          <a href="https://palera.in/" target="_blank" class="btn btn-primary btn-sm">palera1n</a>
                        </div>`;
                      } else if (tool.trim() === "TrollStore") {
                        tooltipText = "Persistent package installer for iOS 14.0-15.4.1";
                        toolLink = `<div class="tooltip-wrapper" data-tooltip="${tooltipText}">
                          <a href="https://ios.cfw.guide/installing-trollstore/" target="_blank" class="btn btn-primary btn-sm">TrollStore</a>
                        </div>`;
                      } else if (tool.trim() === "NekoJB") {
                        tooltipText = "Semi-untethered jailbreak for iOS 16.0-16.6.1";
                        toolLink = `<div class="tooltip-wrapper" data-tooltip="${tooltipText}">
                          <a href="https://nekojb.com/" target="_blank" class="btn btn-primary btn-sm">NekoJB</a>
                        </div>`;
                      } else {
                        toolLink = `<span class="btn btn-secondary btn-sm">${tool.trim()}</span>`;
                      }
                      return toolLink;
                    })
                    .join(" ");

                  return `
                      <tr>
                        <td>${info.device}</td>
                        <td class="jailbreak-tools">${tools}</td>
                      </tr>
                    `;
                })
                .join("");
              jailbreakHtml += `
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </section>
              `;
              
              document.getElementById("jailbreak-info").innerHTML = `
                <div class="mt-3">
                  <div class="status-badge available">
                    <span>Jailbreak Available</span>
                  </div>
                  <p class="mb-4">${deviceModel} with ${osName} ${osVersion} can be jailbroken.</p>
                  ${jailbreakHtml}
                </div>
              `;
            } else {
              document.getElementById("jailbreak-info").innerHTML = `
                <div class="mt-3">
                  <div class="status-badge none">
                    <span>No Jailbreak Available</span>
                  </div>
                  <p class="mb-4">No jailbreak available for ${deviceModel} with ${osName} ${osVersion}.</p>
                </div>
              `;
            }
          },
        });
      }
    </script>
  </head>
  <body class="apple-theme">
    <div class="hero-section">
      <div class="container">
        <div class="row min-vh-100 align-items-center justify-content-center text-center">
          <div class="col-12 col-md-8 col-lg-6">
            <h1 class="display-4 fw-bold mb-4">Can I Jailbreak?</h1>
            <p class="lead text-secondary mb-4">Check if your iOS device can be jailbroken</p>
            <div id="jailbreak-info" class="text-center"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap 5 Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
